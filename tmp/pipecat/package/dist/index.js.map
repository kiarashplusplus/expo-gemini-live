{"mappings":"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","sources":["client-js/index.ts","client-js/client/index.ts","client-js/client/client.ts","client-js/package.json","client-js/rtvi/index.ts","client-js/rtvi/common_types.ts","client-js/rtvi/errors.ts","client-js/rtvi/events.ts","client-js/rtvi/messages.ts","client-js/client/decorators.ts","client-js/client/dispatcher.ts","client-js/client/logger.ts","client-js/client/rest_helpers.ts","client-js/client/transport.ts","client-js/client/utils.ts"],"sourcesContent":["/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nexport * from \"./client\";\nexport * from \"./rtvi\";\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nexport * from \"./client\";\nexport * from \"./dispatcher\";\nexport * from \"./logger\";\nexport * from \"./rest_helpers\";\nexport * from \"./transport\";\nexport * from \"./utils\";\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nimport EventEmitter from \"events\";\nimport TypedEmitter from \"typed-emitter\";\n\nimport packageJson from \"../package.json\";\nimport {\n  BotLLMSearchResponseData,\n  BotLLMTextData,\n  BotReadyData,\n  BotTTSTextData,\n  ClientMessageData,\n  ErrorData,\n  LLMContextMessage,\n  LLMFunctionCallData,\n  LLMFunctionCallResult,\n  Participant,\n  PipecatMetricsData,\n  RTVIEvent,\n  RTVIEvents,\n  RTVIMessage,\n  RTVIMessageType,\n  SendTextOptions,\n  setAboutClient,\n  TranscriptData,\n  TransportState,\n} from \"../rtvi\";\nimport * as RTVIErrors from \"../rtvi/errors\";\nimport { transportAlreadyStarted, transportReady } from \"./decorators\";\nimport { MessageDispatcher } from \"./dispatcher\";\nimport { logger, LogLevel } from \"./logger\";\nimport {\n  APIRequest,\n  ConnectionEndpoint,\n  isAPIRequest,\n  makeRequest,\n} from \"./rest_helpers\";\nimport {\n  Tracks,\n  Transport,\n  TransportConnectionParams,\n  TransportWrapper,\n} from \"./transport\";\nimport { learnAboutClient } from \"./utils\";\n\nexport type FunctionCallParams = {\n  functionName: string;\n  arguments: Record<string, unknown>;\n};\n\nexport type FunctionCallCallback = (\n  fn: FunctionCallParams\n) => Promise<LLMFunctionCallResult | void>;\n\nexport type RTVIEventCallbacks = Partial<{\n  onConnected: () => void;\n  onDisconnected: () => void;\n  onError: (message: RTVIMessage) => void;\n  onTransportStateChanged: (state: TransportState) => void;\n\n  onBotStarted: (botResponse: unknown) => void;\n  onBotConnected: (participant: Participant) => void;\n  onBotReady: (botReadyData: BotReadyData) => void;\n  onBotDisconnected: (participant: Participant) => void;\n  onMetrics: (data: PipecatMetricsData) => void;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  onServerMessage: (data: any) => void;\n  onMessageError: (message: RTVIMessage) => void;\n\n  onParticipantJoined: (participant: Participant) => void;\n  onParticipantLeft: (participant: Participant) => void;\n\n  onAvailableCamsUpdated: (cams: MediaDeviceInfo[]) => void;\n  onAvailableMicsUpdated: (mics: MediaDeviceInfo[]) => void;\n  onAvailableSpeakersUpdated: (speakers: MediaDeviceInfo[]) => void;\n  onCamUpdated: (cam: MediaDeviceInfo) => void;\n  onMicUpdated: (mic: MediaDeviceInfo) => void;\n  onSpeakerUpdated: (speaker: MediaDeviceInfo) => void;\n  onDeviceError: (error: RTVIErrors.DeviceError) => void;\n  onTrackStarted: (track: MediaStreamTrack, participant?: Participant) => void;\n  onTrackStopped: (track: MediaStreamTrack, participant?: Participant) => void;\n  onScreenTrackStarted: (\n    track: MediaStreamTrack,\n    participant?: Participant\n  ) => void;\n  onScreenTrackStopped: (\n    track: MediaStreamTrack,\n    participant?: Participant\n  ) => void;\n  onScreenShareError: (errorMessage: string) => void;\n  onLocalAudioLevel: (level: number) => void;\n  onRemoteAudioLevel: (level: number, participant: Participant) => void;\n\n  onBotStartedSpeaking: () => void;\n  onBotStoppedSpeaking: () => void;\n  onUserStartedSpeaking: () => void;\n  onUserStoppedSpeaking: () => void;\n  onUserTranscript: (data: TranscriptData) => void;\n  onBotTranscript: (data: BotLLMTextData) => void;\n\n  onBotLlmText: (data: BotLLMTextData) => void;\n  onBotLlmStarted: () => void;\n  onBotLlmStopped: () => void;\n  onBotTtsText: (data: BotTTSTextData) => void;\n  onBotTtsStarted: () => void;\n  onBotTtsStopped: () => void;\n\n  onLLMFunctionCall: (data: LLMFunctionCallData) => void;\n  onBotLlmSearchResponse: (data: BotLLMSearchResponseData) => void;\n}>;\n\nexport interface PipecatClientOptions {\n  /**\n   * Transport class for media streaming\n   */\n  transport: Transport;\n\n  /**\n   * Optional callback methods for RTVI events\n   */\n  callbacks?: RTVIEventCallbacks;\n\n  /**\n   * Enable user mic input\n   *\n   * Default to true\n   */\n  enableMic?: boolean;\n\n  /**\n   * Enable user cam input\n   *\n   * Default to false\n   */\n  enableCam?: boolean;\n\n  /**\n   * Enable screen sharing\n   *\n   * Default to false\n   */\n  enableScreenShare?: boolean;\n}\n\nabstract class RTVIEventEmitter extends (EventEmitter as unknown as new () => TypedEmitter<RTVIEvents>) {}\n\nexport class PipecatClient extends RTVIEventEmitter {\n  protected _options: PipecatClientOptions;\n  private _connectResolve: ((value: BotReadyData) => void) | undefined;\n  protected _transport: Transport;\n  protected _transportWrapper: TransportWrapper;\n  protected declare _messageDispatcher: MessageDispatcher;\n  protected _functionCallCallbacks: Record<string, FunctionCallCallback> = {};\n  protected _abortController: AbortController | undefined;\n\n  constructor(options: PipecatClientOptions) {\n    super();\n\n    setAboutClient(learnAboutClient());\n\n    this._transport = options.transport;\n    this._transportWrapper = new TransportWrapper(this._transport);\n\n    // Wrap transport callbacks with event triggers\n    // This allows for either functional callbacks or .on / .off event listeners\n    const wrappedCallbacks: RTVIEventCallbacks = {\n      ...options.callbacks,\n      onMessageError: (message: RTVIMessage) => {\n        options?.callbacks?.onMessageError?.(message);\n        this.emit(RTVIEvent.MessageError, message);\n      },\n      onError: (message: RTVIMessage) => {\n        options?.callbacks?.onError?.(message);\n        try {\n          this.emit(RTVIEvent.Error, message);\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        } catch (e) {\n          logger.debug(\"Could not emit error\", message);\n        }\n        const data = message.data as ErrorData;\n        if (data?.fatal) {\n          logger.error(\"Fatal error reported. Disconnecting...\");\n          this.disconnect();\n        }\n      },\n      onConnected: () => {\n        options?.callbacks?.onConnected?.();\n        this.emit(RTVIEvent.Connected);\n      },\n      onDisconnected: () => {\n        options?.callbacks?.onDisconnected?.();\n        this.emit(RTVIEvent.Disconnected);\n      },\n      onTransportStateChanged: (state: TransportState) => {\n        options?.callbacks?.onTransportStateChanged?.(state);\n        this.emit(RTVIEvent.TransportStateChanged, state);\n      },\n      onParticipantJoined: (p) => {\n        options?.callbacks?.onParticipantJoined?.(p);\n        this.emit(RTVIEvent.ParticipantConnected, p);\n      },\n      onParticipantLeft: (p) => {\n        options?.callbacks?.onParticipantLeft?.(p);\n        this.emit(RTVIEvent.ParticipantLeft, p);\n      },\n      onTrackStarted: (track, p) => {\n        options?.callbacks?.onTrackStarted?.(track, p);\n        this.emit(RTVIEvent.TrackStarted, track, p);\n      },\n      onTrackStopped: (track, p) => {\n        options?.callbacks?.onTrackStopped?.(track, p);\n        this.emit(RTVIEvent.TrackStopped, track, p);\n      },\n      onScreenTrackStarted: (track, p) => {\n        options?.callbacks?.onScreenTrackStarted?.(track, p);\n        this.emit(RTVIEvent.ScreenTrackStarted, track, p);\n      },\n      onScreenTrackStopped: (track, p) => {\n        options?.callbacks?.onScreenTrackStopped?.(track, p);\n        this.emit(RTVIEvent.ScreenTrackStopped, track, p);\n      },\n      onScreenShareError: (errorMessage) => {\n        options?.callbacks?.onScreenShareError?.(errorMessage);\n        this.emit(RTVIEvent.ScreenShareError, errorMessage);\n      },\n      onAvailableCamsUpdated: (cams) => {\n        options?.callbacks?.onAvailableCamsUpdated?.(cams);\n        this.emit(RTVIEvent.AvailableCamsUpdated, cams);\n      },\n      onAvailableMicsUpdated: (mics) => {\n        options?.callbacks?.onAvailableMicsUpdated?.(mics);\n        this.emit(RTVIEvent.AvailableMicsUpdated, mics);\n      },\n      onAvailableSpeakersUpdated: (speakers) => {\n        options?.callbacks?.onAvailableSpeakersUpdated?.(speakers);\n        this.emit(RTVIEvent.AvailableSpeakersUpdated, speakers);\n      },\n      onCamUpdated: (cam) => {\n        options?.callbacks?.onCamUpdated?.(cam);\n        this.emit(RTVIEvent.CamUpdated, cam);\n      },\n      onMicUpdated: (mic) => {\n        options?.callbacks?.onMicUpdated?.(mic);\n        this.emit(RTVIEvent.MicUpdated, mic);\n      },\n      onSpeakerUpdated: (speaker) => {\n        options?.callbacks?.onSpeakerUpdated?.(speaker);\n        this.emit(RTVIEvent.SpeakerUpdated, speaker);\n      },\n      onDeviceError: (error) => {\n        options?.callbacks?.onDeviceError?.(error);\n        this.emit(RTVIEvent.DeviceError, error);\n      },\n      onBotStarted: (botResponse: unknown) => {\n        options?.callbacks?.onBotStarted?.(botResponse);\n        this.emit(RTVIEvent.BotStarted, botResponse);\n      },\n      onBotConnected: (p) => {\n        options?.callbacks?.onBotConnected?.(p);\n        this.emit(RTVIEvent.BotConnected, p);\n      },\n      onBotReady: (botReadyData: BotReadyData) => {\n        options?.callbacks?.onBotReady?.(botReadyData);\n        this.emit(RTVIEvent.BotReady, botReadyData);\n      },\n      onBotDisconnected: (p) => {\n        options?.callbacks?.onBotDisconnected?.(p);\n        this.emit(RTVIEvent.BotDisconnected, p);\n      },\n      onBotStartedSpeaking: () => {\n        options?.callbacks?.onBotStartedSpeaking?.();\n        this.emit(RTVIEvent.BotStartedSpeaking);\n      },\n      onBotStoppedSpeaking: () => {\n        options?.callbacks?.onBotStoppedSpeaking?.();\n        this.emit(RTVIEvent.BotStoppedSpeaking);\n      },\n      onRemoteAudioLevel: (level, p) => {\n        options?.callbacks?.onRemoteAudioLevel?.(level, p);\n        this.emit(RTVIEvent.RemoteAudioLevel, level, p);\n      },\n      onUserStartedSpeaking: () => {\n        options?.callbacks?.onUserStartedSpeaking?.();\n        this.emit(RTVIEvent.UserStartedSpeaking);\n      },\n      onUserStoppedSpeaking: () => {\n        options?.callbacks?.onUserStoppedSpeaking?.();\n        this.emit(RTVIEvent.UserStoppedSpeaking);\n      },\n      onLocalAudioLevel: (level) => {\n        options?.callbacks?.onLocalAudioLevel?.(level);\n        this.emit(RTVIEvent.LocalAudioLevel, level);\n      },\n      onUserTranscript: (data) => {\n        options?.callbacks?.onUserTranscript?.(data);\n        this.emit(RTVIEvent.UserTranscript, data);\n      },\n      onBotTranscript: (text) => {\n        options?.callbacks?.onBotTranscript?.(text);\n        this.emit(RTVIEvent.BotTranscript, text);\n      },\n      onBotLlmText: (text) => {\n        options?.callbacks?.onBotLlmText?.(text);\n        this.emit(RTVIEvent.BotLlmText, text);\n      },\n      onBotLlmStarted: () => {\n        options?.callbacks?.onBotLlmStarted?.();\n        this.emit(RTVIEvent.BotLlmStarted);\n      },\n      onBotLlmStopped: () => {\n        options?.callbacks?.onBotLlmStopped?.();\n        this.emit(RTVIEvent.BotLlmStopped);\n      },\n      onBotTtsText: (text) => {\n        options?.callbacks?.onBotTtsText?.(text);\n        this.emit(RTVIEvent.BotTtsText, text);\n      },\n      onBotTtsStarted: () => {\n        options?.callbacks?.onBotTtsStarted?.();\n        this.emit(RTVIEvent.BotTtsStarted);\n      },\n      onBotTtsStopped: () => {\n        options?.callbacks?.onBotTtsStopped?.();\n        this.emit(RTVIEvent.BotTtsStopped);\n      },\n    };\n\n    // Update options to reference wrapped callbacks and config defaults\n    this._options = {\n      ...options,\n      callbacks: wrappedCallbacks,\n      enableMic: options.enableMic ?? true,\n      enableCam: options.enableCam ?? false,\n      enableScreenShare: options.enableScreenShare ?? false,\n    };\n\n    // Instantiate the transport class and bind message handler\n    this._initialize();\n\n    // Get package version number\n    logger.debug(\"[Pipecat Client] Initialized\", this.version);\n  }\n\n  public setLogLevel(level: LogLevel) {\n    logger.setLevel(level);\n  }\n\n  // ------ Transport methods\n\n  /**\n   * Initialize local media devices\n   */\n  public async initDevices() {\n    logger.debug(\"[Pipecat Client] Initializing devices...\");\n    await this._transport.initDevices();\n  }\n\n  /**\n   * startBot() is a method that initiates the bot by posting to a specified endpoint\n   * that optionally returns connection parameters for establishing a transport session.\n   * @param startBotParams\n   * @returns Promise that resolves to TransportConnectionParams or unknown\n   */\n  @transportAlreadyStarted\n  public async startBot(startBotParams: APIRequest): Promise<unknown> {\n    this._transport.state = \"authenticating\";\n    this._transport.startBotParams = startBotParams\n    this._abortController = new AbortController();\n    let response: unknown;\n    try {\n      response = await makeRequest(startBotParams, this._abortController);\n    } catch (e) {\n      let errMsg = \"An unknown error occurred while starting the bot.\";\n      let status;\n      if (e instanceof Response) {\n        const errResp = await e.json();\n        errMsg = errResp.info ?? errResp.detail ?? e.statusText;\n        status = e.status;\n      } else if (e instanceof Error) {\n        errMsg = e.message;\n      }\n      this._options.callbacks?.onError?.(\n        new RTVIMessage(RTVIMessageType.ERROR_RESPONSE, {\n          message: errMsg,\n          fatal: true,\n        })\n      );\n      throw new RTVIErrors.StartBotError(errMsg, status);\n    }\n    this._transport.state = \"authenticated\";\n    this._options.callbacks?.onBotStarted?.(response);\n    return response;\n  }\n\n  /**\n   * The `connect` function establishes a transport session and awaits a\n   * bot-ready signal, handling various connection states and errors.\n   * @param {TransportConnectionParams} [connectParams] -\n   * The `connectParams` parameter in the `connect` method should be of type\n   * `TransportConnectionParams`. This parameter is passed to the transport\n   * for establishing a transport session.\n   * NOTE: `connectParams` as type `ConnectionEndpoint` IS NOW DEPRECATED. If you\n   * want to authenticate and connect to a bot in one step, use\n   * `startBotAndConnect()` instead.\n   * @returns The `connect` method returns a Promise that resolves to an unknown value.\n   */\n  @transportAlreadyStarted\n  public async connect(\n    connectParams?: TransportConnectionParams | ConnectionEndpoint\n  ): Promise<BotReadyData> {\n    if (connectParams && isAPIRequest(connectParams)) {\n      logger.warn(\n        \"Calling connect with an API endpoint is deprecated. Use startBotAndConnect() instead.\"\n      );\n      return this.startBotAndConnect(connectParams as APIRequest);\n    }\n\n    // Establish transport session and await bot ready signal\n    return new Promise((resolve, reject) => {\n      (async () => {\n        this._connectResolve = resolve;\n\n        if (this._transport.state === \"disconnected\") {\n          await this._transport.initDevices();\n        }\n\n        try {\n          await this._transport.connect(\n            connectParams as TransportConnectionParams\n          );\n          await this._transport.sendReadyMessage();\n        } catch (e) {\n          this.disconnect();\n          reject(e);\n          return;\n        }\n      })();\n    });\n  }\n\n  @transportAlreadyStarted\n  public async startBotAndConnect(\n    startBotParams: APIRequest\n  ): Promise<BotReadyData> {\n    // since startBot() will change the transport state, we need\n    // to do device initialization here.\n    if (this._transport.state === \"disconnected\") {\n      await this._transport.initDevices();\n    }\n\n    const connectionParams = await this.startBot(startBotParams);\n    return this.connect(connectionParams);\n  }\n\n  /**\n   * Disconnect the voice client from the transport\n   * Reset / reinitialize transport and abort any pending requests\n   */\n  public async disconnect(): Promise<void> {\n    await this._transport.disconnect();\n    this._messageDispatcher.disconnect();\n  }\n\n  /**\n   * The _initialize function performs internal set up of the transport and\n   * message dispatcher.\n   */\n  private _initialize() {\n    this._transport.initialize(this._options, this.handleMessage.bind(this));\n\n    // Create a new message dispatch queue for async message handling\n    this._messageDispatcher = new MessageDispatcher(\n      this._transport.sendMessage.bind(this._transport)\n    );\n  }\n\n  /**\n   * Get the current state of the transport\n   */\n  public get connected(): boolean {\n    return [\"connected\", \"ready\"].includes(this._transport.state);\n  }\n\n  public get transport(): Transport {\n    return this._transportWrapper.proxy;\n  }\n\n  public get state(): TransportState {\n    return this._transport.state;\n  }\n\n  public get version(): string {\n    return packageJson.version;\n  }\n\n  // ------ Device methods\n\n  public async getAllMics(): Promise<MediaDeviceInfo[]> {\n    return await this._transport.getAllMics();\n  }\n\n  public async getAllCams(): Promise<MediaDeviceInfo[]> {\n    return await this._transport.getAllCams();\n  }\n\n  public async getAllSpeakers(): Promise<MediaDeviceInfo[]> {\n    return await this._transport.getAllSpeakers();\n  }\n\n  public get selectedMic() {\n    return this._transport.selectedMic;\n  }\n\n  public get selectedCam() {\n    return this._transport.selectedCam;\n  }\n\n  public get selectedSpeaker() {\n    return this._transport.selectedSpeaker;\n  }\n\n  public updateMic(micId: string) {\n    this._transport.updateMic(micId);\n  }\n\n  public updateCam(camId: string) {\n    this._transport.updateCam(camId);\n  }\n\n  public updateSpeaker(speakerId: string) {\n    this._transport.updateSpeaker(speakerId);\n  }\n\n  public enableMic(enable: boolean) {\n    this._transport.enableMic(enable);\n  }\n\n  public get isMicEnabled(): boolean {\n    return this._transport.isMicEnabled;\n  }\n\n  public enableCam(enable: boolean) {\n    this._transport.enableCam(enable);\n  }\n\n  public get isCamEnabled(): boolean {\n    return this._transport.isCamEnabled;\n  }\n\n  public tracks(): Tracks {\n    return this._transport.tracks();\n  }\n\n  public enableScreenShare(enable: boolean) {\n    return this._transport.enableScreenShare(enable);\n  }\n\n  public get isSharingScreen(): boolean {\n    return this._transport.isSharingScreen;\n  }\n\n  // ------ Messages\n\n  /**\n   * Directly send a message to the bot via the transport.\n   * Do not await a response.\n   * @param msgType - a string representing the message type\n   * @param data - a dictionary of data to send with the message\n   */\n  @transportReady\n  public sendClientMessage(msgType: string, data?: unknown): void {\n    this._transport.sendMessage(\n      new RTVIMessage(RTVIMessageType.CLIENT_MESSAGE, {\n        t: msgType,\n        d: data,\n      } as ClientMessageData)\n    );\n  }\n\n  /**\n   * Directly send a message to the bot via the transport.\n   * Wait for and return the response.\n   * @param msgType - a string representing the message type\n   * @param data - a dictionary of data to send with the message\n   * @param timeout - optional timeout in milliseconds for the response\n   */\n  @transportReady\n  public async sendClientRequest(\n    msgType: string,\n    data: unknown,\n    timeout?: number\n  ) {\n    const msgData: ClientMessageData = { t: msgType, d: data };\n    const response = await this._messageDispatcher.dispatch(\n      msgData,\n      RTVIMessageType.CLIENT_MESSAGE,\n      timeout\n    );\n    const ret_data = response.data as ClientMessageData;\n    return ret_data.d;\n  }\n\n  public registerFunctionCallHandler(\n    functionName: string,\n    callback: FunctionCallCallback\n  ) {\n    this._functionCallCallbacks[functionName] = callback;\n  }\n\n  public unregisterFunctionCallHandler(functionName: string) {\n    delete this._functionCallCallbacks[functionName];\n  }\n\n  public unregisterAllFunctionCallHandlers() {\n    this._functionCallCallbacks = {};\n  }\n\n  @transportReady\n  public async appendToContext(context: LLMContextMessage) {\n    logger.warn(\"appendToContext() is deprecated. Use sendText() instead.\");\n    await this._transport.sendMessage(\n      new RTVIMessage(RTVIMessageType.APPEND_TO_CONTEXT, {\n        role: context.role,\n        content: context.content,\n        run_immediately: context.run_immediately,\n      } as LLMContextMessage)\n    );\n    return true;\n  }\n\n  @transportReady\n  public async sendText(content: string, options: SendTextOptions = {}) {\n    await this._transport.sendMessage(\n      new RTVIMessage(RTVIMessageType.SEND_TEXT, {\n        content,\n        options,\n      })\n    );\n  }\n\n  /**\n   * Disconnects the bot, but keeps the session alive\n   */\n  @transportReady\n  public disconnectBot(): void {\n    this._transport.sendMessage(\n      new RTVIMessage(RTVIMessageType.DISCONNECT_BOT, {})\n    );\n  }\n\n  protected handleMessage(ev: RTVIMessage): void {\n    logger.debug(\"[RTVI Message]\", ev);\n\n    switch (ev.type) {\n      case RTVIMessageType.BOT_READY: {\n        const data = ev.data as BotReadyData;\n        const botVersion = data.version\n          ? data.version.split(\".\").map(Number)\n          : [0, 0, 0];\n        logger.debug(`[Pipecat Client] Bot is ready. Version: ${data.version}`);\n        if (botVersion[0] < 1) {\n          logger.warn(\n            \"[Pipecat Client] Bot version is less than 1.0.0, which may not be compatible with this client.\"\n          );\n        }\n        this._connectResolve?.(ev.data as BotReadyData);\n        this._options.callbacks?.onBotReady?.(ev.data as BotReadyData);\n        break;\n      }\n      case RTVIMessageType.ERROR:\n        this._options.callbacks?.onError?.(ev);\n        break;\n      case RTVIMessageType.SERVER_RESPONSE: {\n        this._messageDispatcher.resolve(ev);\n        break;\n      }\n      case RTVIMessageType.ERROR_RESPONSE: {\n        const resp = this._messageDispatcher.reject(ev);\n        this._options.callbacks?.onMessageError?.(resp as RTVIMessage);\n        break;\n      }\n      case RTVIMessageType.USER_STARTED_SPEAKING:\n        this._options.callbacks?.onUserStartedSpeaking?.();\n        break;\n      case RTVIMessageType.USER_STOPPED_SPEAKING:\n        this._options.callbacks?.onUserStoppedSpeaking?.();\n        break;\n      case RTVIMessageType.BOT_STARTED_SPEAKING:\n        this._options.callbacks?.onBotStartedSpeaking?.();\n        break;\n      case RTVIMessageType.BOT_STOPPED_SPEAKING:\n        this._options.callbacks?.onBotStoppedSpeaking?.();\n        break;\n      case RTVIMessageType.USER_TRANSCRIPTION: {\n        const TranscriptData = ev.data as TranscriptData;\n        this._options.callbacks?.onUserTranscript?.(TranscriptData);\n        break;\n      }\n      case RTVIMessageType.BOT_TRANSCRIPTION: {\n        this._options.callbacks?.onBotTranscript?.(ev.data as BotLLMTextData);\n        break;\n      }\n      case RTVIMessageType.BOT_LLM_TEXT:\n        this._options.callbacks?.onBotLlmText?.(ev.data as BotLLMTextData);\n        break;\n      case RTVIMessageType.BOT_LLM_STARTED:\n        this._options.callbacks?.onBotLlmStarted?.();\n        break;\n      case RTVIMessageType.BOT_LLM_STOPPED:\n        this._options.callbacks?.onBotLlmStopped?.();\n        break;\n      case RTVIMessageType.BOT_TTS_TEXT:\n        this._options.callbacks?.onBotTtsText?.(ev.data as BotTTSTextData);\n        break;\n      case RTVIMessageType.BOT_TTS_STARTED:\n        this._options.callbacks?.onBotTtsStarted?.();\n        break;\n      case RTVIMessageType.BOT_TTS_STOPPED:\n        this._options.callbacks?.onBotTtsStopped?.();\n        break;\n      case RTVIMessageType.METRICS:\n        this._options.callbacks?.onMetrics?.(ev.data as PipecatMetricsData);\n        this.emit(RTVIEvent.Metrics, ev.data as PipecatMetricsData);\n        break;\n      case RTVIMessageType.SERVER_MESSAGE: {\n        this._options.callbacks?.onServerMessage?.(ev.data);\n        this.emit(RTVIEvent.ServerMessage, ev.data);\n        break;\n      }\n      case RTVIMessageType.LLM_FUNCTION_CALL: {\n        const data = ev.data as LLMFunctionCallData;\n        // First check if there's a registered function call handler\n        // and trigger it if so.\n        const fc = this._functionCallCallbacks[data.function_name];\n        if (fc) {\n          const params = {\n            functionName: data.function_name,\n            arguments: data.args,\n          };\n          /*\n           * registered function call handlers have the ability to\n           * asynchronously return a result that is sent back to the server\n           * as an automatically crafted LLM_FUNCTION_CALL_RESULT message.\n           * Note: If the callback returns null or undefined, no result message\n           * is sent.\n           */\n          fc(params).then((result) => {\n            // == intentional to check for null or undefined\n            if (result == undefined) {\n              return;\n            }\n            this._transport.sendMessage(\n              new RTVIMessage(RTVIMessageType.LLM_FUNCTION_CALL_RESULT, {\n                function_name: data.function_name,\n                tool_call_id: data.tool_call_id,\n                arguments: data.args,\n                result,\n              })\n            );\n          });\n        }\n        /*\n         * Now emit the event for any generic LLMFunctionCall listeners/callbacks\n         * Note: When using these, the onus is on the client to generate and\n         *       send the LLM_FUNCTION_CALL_RESULT message if needed.\n         */\n        this._options.callbacks?.onLLMFunctionCall?.(data);\n        this.emit(RTVIEvent.LLMFunctionCall, data);\n        break;\n      }\n      case RTVIMessageType.BOT_LLM_SEARCH_RESPONSE: {\n        const data = ev.data as BotLLMSearchResponseData;\n        this._options.callbacks?.onBotLlmSearchResponse?.(data);\n        this.emit(RTVIEvent.BotLlmSearchResponse, data);\n        break;\n      }\n      default: {\n        logger.debug(\"[Pipecat Client] Unrecognized message type\", ev.type);\n        break;\n      }\n    }\n  }\n\n  // ------ Helpers\n}\n","{\n  \"name\": \"@pipecat-ai/client-js\",\n  \"version\": \"1.4.0\",\n  \"license\": \"BSD-2-Clause\",\n  \"main\": \"dist/index.js\",\n  \"module\": \"dist/index.module.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"source\": \"index.ts\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/pipecat-ai/pipecat-client-web.git\"\n  },\n  \"files\": [\n    \"dist\",\n    \"package.json\",\n    \"README.md\"\n  ],\n  \"scripts\": {\n    \"build\": \"jest --silent --passWithNoTests && parcel build --no-cache\",\n    \"dev\": \"parcel watch\",\n    \"lint\": \"eslint . --report-unused-disable-directives --max-warnings 0\",\n    \"test\": \"jest\"\n  },\n  \"jest\": {\n    \"preset\": \"ts-jest\",\n    \"testEnvironment\": \"jsdom\"\n  },\n  \"devDependencies\": {\n    \"@jest/globals\": \"^29.7.0\",\n    \"@types/clone-deep\": \"^4.0.4\",\n    \"@types/jest\": \"^29.5.12\",\n    \"@types/uuid\": \"^10.0.0\",\n    \"eslint\": \"^9.11.1\",\n    \"eslint-config-prettier\": \"^9.1.0\",\n    \"eslint-plugin-simple-import-sort\": \"^12.1.1\",\n    \"jest\": \"^29.7.0\",\n    \"jest-environment-jsdom\": \"^30.0.2\",\n    \"ts-jest\": \"^29.2.5\"\n  },\n  \"dependencies\": {\n    \"@types/events\": \"^3.0.3\",\n    \"bowser\": \"^2.11.0\",\n    \"clone-deep\": \"^4.0.1\",\n    \"events\": \"^3.3.0\",\n    \"typed-emitter\": \"^2.1.0\",\n    \"uuid\": \"^10.0.0\"\n  }\n}\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nexport * from \"./common_types\";\nexport * from \"./errors\";\nexport * from \"./events\";\nexport * from \"./messages\";\n","export type TransportState =\n  | \"disconnected\"\n  | \"initializing\"\n  | \"initialized\"\n  | \"authenticating\"\n  | \"authenticated\"\n  | \"connecting\"\n  | \"connected\"\n  | \"ready\"\n  | \"disconnecting\"\n  | \"error\";\n\nexport enum TransportStateEnum {\n  DISCONNECTED = \"disconnected\",\n  INITIALIZING = \"initializing\",\n  INITIALIZED = \"initialized\",\n  AUTHENTICATING = \"authenticating\",\n  AUTHENTICATED = \"authenticated\",\n  CONNECTING = \"connecting\",\n  CONNECTED = \"connected\",\n  READY = \"ready\",\n  DISCONNECTING = \"disconnecting\",\n  ERROR = \"error\",\n}\n\nexport type Participant = {\n  id: string;\n  name: string;\n  local: boolean;\n};\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nexport class RTVIError extends Error {\n  readonly status: number | undefined;\n\n  constructor(message?: string, status?: number | undefined) {\n    super(message);\n    this.status = status;\n  }\n}\n\nexport class ConnectionTimeoutError extends RTVIError {\n  constructor(message?: string | undefined) {\n    super(\n      message ??\n        \"Bot did not enter ready state within the specified timeout period.\"\n    );\n  }\n}\n\nexport class StartBotError extends RTVIError {\n  readonly error: string = \"invalid-request-error\";\n  constructor(message?: string | undefined, status?: number) {\n    super(\n      message ?? `Failed to connect / invalid auth bundle from base url`,\n      status ?? 500\n    );\n  }\n}\n\nexport class TransportStartError extends RTVIError {\n  constructor(message?: string | undefined) {\n    super(message ?? \"Unable to connect to transport\");\n  }\n}\n\nexport class InvalidTransportParamsError extends RTVIError {\n  constructor(message?: string | undefined) {\n    super(message ?? \"Invalid transport connection parameters\");\n  }\n}\n\nexport class BotNotReadyError extends RTVIError {\n  constructor(message?: string | undefined) {\n    super(\n      message ??\n        \"Attempt to call action on transport when not in 'ready' state.\"\n    );\n  }\n}\n\nexport class BotAlreadyStartedError extends RTVIError {\n  constructor(message?: string | undefined) {\n    super(\n      message ??\n        \"Pipecat client has already been started. Please call disconnect() before starting again.\"\n    );\n  }\n}\n\nexport class UnsupportedFeatureError extends RTVIError {\n  readonly feature: string;\n  constructor(feature: string, source?: string, message?: string) {\n    let msg = `${feature} not supported${message ? `: ${message}` : \"\"}`;\n    if (source) {\n      msg = `${source} does not support ${feature}${\n        message ? `: ${message}` : \"\"\n      }`;\n    }\n    super(msg);\n    this.feature = feature;\n  }\n}\n\nexport type DeviceArray = Array<\"cam\" | \"mic\" | \"speaker\">;\nexport type DeviceErrorType =\n  | \"in-use\"\n  | \"permissions\"\n  | \"undefined-mediadevices\"\n  | \"not-found\"\n  | \"constraints\"\n  | \"unknown\";\nexport type DeviceErrorDetails = Record<\n  string,\n  string | boolean | number | Error\n>;\n\nexport class DeviceError extends RTVIError {\n  readonly devices: DeviceArray;\n  readonly type: DeviceErrorType;\n  readonly details: DeviceErrorDetails | undefined;\n  constructor(\n    devices: DeviceArray,\n    type: DeviceErrorType,\n    message?: string,\n    details?: DeviceErrorDetails\n  ) {\n    super(message ?? `Device error for ${devices.join(\", \")}: ${type}`);\n    this.devices = devices;\n    this.type = type;\n    this.details = details;\n  }\n}\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nimport { Participant, TransportState } from \"./common_types\";\nimport { DeviceError } from \"./errors\";\nimport {\n  BotLLMSearchResponseData,\n  BotLLMTextData,\n  BotReadyData,\n  BotTTSTextData,\n  LLMFunctionCallData,\n  PipecatMetricsData,\n  RTVIMessage,\n  TranscriptData,\n} from \"./messages\";\n\nexport enum RTVIEvent {\n  /** local connection state events */\n  Connected = \"connected\",\n  Disconnected = \"disconnected\",\n  TransportStateChanged = \"transportStateChanged\",\n\n  /** remote connection state events */\n  BotStarted = \"botStarted\",\n  BotConnected = \"botConnected\",\n  BotReady = \"botReady\",\n  BotDisconnected = \"botDisconnected\",\n  Error = \"error\",\n\n  /** server messaging */\n  ServerMessage = \"serverMessage\",\n  ServerResponse = \"serverResponse\",\n  MessageError = \"messageError\",\n\n  /** service events */\n  Metrics = \"metrics\",\n\n  // vad events\n  BotStartedSpeaking = \"botStartedSpeaking\",\n  BotStoppedSpeaking = \"botStoppedSpeaking\",\n  UserStartedSpeaking = \"userStartedSpeaking\",\n  UserStoppedSpeaking = \"userStoppedSpeaking\",\n\n  // stt events\n  UserTranscript = \"userTranscript\",\n  BotTranscript = \"botTranscript\",\n\n  // llm events\n  BotLlmText = \"botLlmText\",\n  BotLlmStarted = \"botLlmStarted\",\n  BotLlmStopped = \"botLlmStopped\",\n\n  LLMFunctionCall = \"llmFunctionCall\",\n\n  BotLlmSearchResponse = \"botLlmSearchResponse\",\n\n  // tts events\n  BotTtsText = \"botTtsText\",\n  BotTtsStarted = \"botTtsStarted\",\n  BotTtsStopped = \"botTtsStopped\",\n\n  /** participant events */\n  ParticipantConnected = \"participantConnected\",\n  ParticipantLeft = \"participantLeft\",\n\n  /** media events */\n  TrackStarted = \"trackStarted\",\n  TrackStopped = \"trackStopped\",\n  ScreenTrackStarted = \"screenTrackStarted\",\n  ScreenTrackStopped = \"screenTrackStopped\",\n  ScreenShareError = \"screenShareError\",\n\n  LocalAudioLevel = \"localAudioLevel\",\n  RemoteAudioLevel = \"remoteAudioLevel\",\n\n  /** media device events */\n  AvailableCamsUpdated = \"availableCamsUpdated\",\n  AvailableMicsUpdated = \"availableMicsUpdated\",\n  AvailableSpeakersUpdated = \"availableSpeakersUpdated\",\n  CamUpdated = \"camUpdated\",\n  MicUpdated = \"micUpdated\",\n  SpeakerUpdated = \"speakerUpdated\",\n  DeviceError = \"deviceError\",\n}\n\nexport type RTVIEvents = Partial<{\n  /** local connection state events */\n  connected: () => void;\n  disconnected: () => void;\n  transportStateChanged: (state: TransportState) => void;\n\n  /** remote connection state events */\n  botStarted: (botResponse: unknown) => void;\n  botConnected: (participant: Participant) => void;\n  botReady: (botData: BotReadyData) => void;\n  botDisconnected: (participant: Participant) => void;\n  error: (message: RTVIMessage) => void;\n\n  /** server messaging */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  serverMessage: (data: any) => void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  serverResponse: (data: any) => void;\n  messageError: (message: RTVIMessage) => void;\n\n  /** service events */\n  metrics: (data: PipecatMetricsData) => void;\n\n  // vad events\n  botStartedSpeaking: () => void;\n  botStoppedSpeaking: () => void;\n  userStartedSpeaking: () => void;\n  userStoppedSpeaking: () => void;\n\n  // stt events\n  userTranscript: (data: TranscriptData) => void;\n  botTranscript: (data: BotLLMTextData) => void;\n\n  // llm events\n  botLlmText: (data: BotLLMTextData) => void;\n  botLlmStarted: () => void;\n  botLlmStopped: () => void;\n\n  llmFunctionCall: (func: LLMFunctionCallData) => void;\n\n  botLlmSearchResponse: (data: BotLLMSearchResponseData) => void;\n\n  // tts events\n  botTtsText: (data: BotTTSTextData) => void;\n  botTtsStarted: () => void;\n  botTtsStopped: () => void;\n\n  /** participant events */\n  participantConnected: (participant: Participant) => void;\n  participantLeft: (participant: Participant) => void;\n\n  /** media events */\n  trackStarted: (track: MediaStreamTrack, participant?: Participant) => void;\n  trackStopped: (track: MediaStreamTrack, participant?: Participant) => void;\n  screenTrackStarted: (track: MediaStreamTrack, p?: Participant) => void;\n  screenTrackStopped: (track: MediaStreamTrack, p?: Participant) => void;\n  screenShareError: (errorMessage: string) => void;\n\n  localAudioLevel: (level: number) => void;\n  remoteAudioLevel: (level: number, p: Participant) => void;\n\n  /** media device events */\n  availableCamsUpdated: (cams: MediaDeviceInfo[]) => void;\n  availableMicsUpdated: (mics: MediaDeviceInfo[]) => void;\n  availableSpeakersUpdated: (speakers: MediaDeviceInfo[]) => void;\n  camUpdated: (cam: MediaDeviceInfo) => void;\n  micUpdated: (mic: MediaDeviceInfo) => void;\n  speakerUpdated: (speaker: MediaDeviceInfo) => void;\n  deviceError: (error: DeviceError) => void;\n}>;\n\nexport type RTVIEventHandler<E extends RTVIEvent> = E extends keyof RTVIEvents\n  ? RTVIEvents[E]\n  : never;\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport {\n  name as packageName,\n  version as packageVersion,\n} from \"../package.json\";\n\nexport const RTVI_PROTOCOL_VERSION = \"1.0.0\";\nexport const RTVI_MESSAGE_LABEL = \"rtvi-ai\";\n\n/**\n * Messages the corresponding server-side client expects to receive about\n * our client-side state.\n */\nexport enum RTVIMessageType {\n  /** Outbound Messages */\n  CLIENT_READY = \"client-ready\",\n  DISCONNECT_BOT = \"disconnect-bot\",\n  // Client-to-server messages\n  CLIENT_MESSAGE = \"client-message\",\n  SEND_TEXT = \"send-text\",\n  // DEPRECATED\n  APPEND_TO_CONTEXT = \"append-to-context\",\n\n  /**\n   * Inbound Messages\n   * Messages the server-side client sends to our client-side client regarding\n   * its state or other non-service-specific messaging.\n   */\n  BOT_READY = \"bot-ready\", // Bot is connected and ready to receive messages\n  ERROR = \"error\", // Bot initialization error\n  METRICS = \"metrics\", // Bot reporting metrics\n  SERVER_MESSAGE = \"server-message\", // Custom server-to-client message\n  SERVER_RESPONSE = \"server-response\", // Server response to client message\n  ERROR_RESPONSE = \"error-response\", // Error message in response to an outbound message\n  APPEND_TO_CONTEXT_RESULT = \"append-to-context-result\", // Result of appending to context\n\n  /** Transcription Messages */\n  USER_TRANSCRIPTION = \"user-transcription\", // Local user speech to text transcription (partials and finals)\n  BOT_TRANSCRIPTION = \"bot-transcription\", // Bot full text transcription (sentence aggregated)\n  USER_STARTED_SPEAKING = \"user-started-speaking\", // User started speaking\n  USER_STOPPED_SPEAKING = \"user-stopped-speaking\", // User stopped speaking\n  BOT_STARTED_SPEAKING = \"bot-started-speaking\", // Bot started speaking\n  BOT_STOPPED_SPEAKING = \"bot-stopped-speaking\", // Bot stopped speaking\n\n  /** LLM Messages */\n  USER_LLM_TEXT = \"user-llm-text\", // Aggregated user input text which is sent to LLM\n  BOT_LLM_TEXT = \"bot-llm-text\", // Streamed token returned by the LLM\n  BOT_LLM_STARTED = \"bot-llm-started\", // Bot LLM inference starts\n  BOT_LLM_STOPPED = \"bot-llm-stopped\", // Bot LLM inference stops\n\n  // Function calling\n  LLM_FUNCTION_CALL = \"llm-function-call\", // Inbound function call from LLM\n  LLM_FUNCTION_CALL_RESULT = \"llm-function-call-result\", // Outbound result of function call\n\n  BOT_LLM_SEARCH_RESPONSE = \"bot-llm-search-response\", // Bot LLM search response\n\n  /** TTS Messages */\n  BOT_TTS_TEXT = \"bot-tts-text\", // Bot TTS text output (streamed word as it is spoken)\n  BOT_TTS_STARTED = \"bot-tts-started\", // Bot TTS response starts\n  BOT_TTS_STOPPED = \"bot-tts-stopped\", // Bot TTS response stops\n}\n\n// ----- Message Data Types\n\nexport type BotReadyData = {\n  version: string;\n  about?: unknown; // Optional about data from the bot\n};\n\ntype PlatformDetailsValue = undefined | string | number | boolean;\ntype NestedPlatformDetails =\n  | PlatformDetailsValue\n  | Record<string, PlatformDetailsValue>;\n\n// This is an interface so that different client libraries can provide their own\n// implementation of the about data, e.g., with more platform-specific details.\n// The client library should call `setAboutClient` to set this data before sending\n// the `client-ready` message.\nexport interface AboutClientData {\n  library: string; // Library name, e.g., \"@pipecat-ai/client-js\"\n  library_version?: string; // Library version, e.g., \"1.0.0\"\n  platform?: string; // Platform name, e.g., \"Android\"\n  platform_version?: string; // Platform version, e.g., \"14.0\"\n  platform_details?: Record<string, NestedPlatformDetails>; // Optional platform details, e.g., browser info\n}\n\nexport type ClientReadyData = {\n  version: string;\n  about: AboutClientData; // Information about the client library\n};\n\nexport type ErrorData = {\n  message: string;\n  fatal: boolean;\n};\n\nexport type PipecatMetricData = {\n  processor: string;\n  value: number;\n};\n\nexport type PipecatMetricsData = {\n  processing?: PipecatMetricData[];\n  ttfb?: PipecatMetricData[];\n  characters?: PipecatMetricData[];\n};\n\nexport type TranscriptData = {\n  text: string;\n  final: boolean;\n  timestamp: string;\n  user_id: string;\n};\n\nexport type BotLLMTextData = {\n  text: string;\n};\n\nexport type BotTTSTextData = {\n  text: string;\n};\n\nexport type ServerMessageData = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  data: any;\n};\n\nexport type ClientMessageData = {\n  t: string;\n  d?: unknown;\n};\n\nexport type LLMSearchResult = {\n  text: string;\n  confidence: number[];\n};\n\nexport type BotLLMSearchResponseData = {\n  search_result?: string;\n  rendered_content?: string;\n  origins: LLMSearchOrigin[];\n};\n\nexport type LLMSearchOrigin = {\n  site_uri?: string;\n  site_title?: string;\n  results: LLMSearchResult[];\n};\n\nexport type LLMFunctionCallData = {\n  function_name: string;\n  tool_call_id: string;\n  args: Record<string, unknown>;\n};\n\nexport type LLMFunctionCallResult = Record<string, unknown> | string;\n\nexport type LLMFunctionCallResultResponse = {\n  function_name: string;\n  tool_call_id: string;\n  args: Record<string, unknown>;\n  result: LLMFunctionCallResult;\n};\n\nexport type SendTextOptions = {\n  run_immediately?: boolean;\n  audio_response?: boolean;\n};\n\n/** DEPRECATED */\nexport type LLMContextMessage = {\n  role: \"user\" | \"assistant\";\n  content: unknown;\n  run_immediately?: boolean;\n};\n\n/** DEPRECATED */\nexport type AppendToContextResultData = {\n  result: Record<string, unknown> | string;\n};\n\n// ----- Message Classes\n\nlet _aboutClient: AboutClientData | undefined;\nexport function setAboutClient(about: AboutClientData) {\n  // allow for partial updates to the about data\n  // this allows the client to set the about data at any time\n  // before sending the `client-ready` message and not worry about\n  // overwriting existing data\n  if (_aboutClient) {\n    _aboutClient = { ..._aboutClient, ...about };\n  } else {\n    // if no about data is set, set it to the provided value\n    _aboutClient = about;\n  }\n}\n\nexport class RTVIMessage {\n  id: string;\n  label: string = RTVI_MESSAGE_LABEL;\n  type: string;\n  data: unknown;\n\n  constructor(type: string, data: unknown, id?: string) {\n    this.type = type;\n    this.data = data;\n    this.id = id || uuidv4().slice(0, 8);\n  }\n\n  // Outbound message types\n  static clientReady(): RTVIMessage {\n    return new RTVIMessage(RTVIMessageType.CLIENT_READY, {\n      version: RTVI_PROTOCOL_VERSION,\n      about: _aboutClient || {\n        library: packageName,\n        library_version: packageVersion,\n      },\n    });\n  }\n\n  static disconnectBot(): RTVIMessage {\n    return new RTVIMessage(RTVIMessageType.DISCONNECT_BOT, {});\n  }\n\n  static error(message: string, fatal = false): RTVIMessage {\n    return new RTVIMessage(RTVIMessageType.ERROR, { message, fatal });\n  }\n}\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nimport { BotAlreadyStartedError, BotNotReadyError } from \"../rtvi\";\nimport { PipecatClient } from \".\";\n\nexport function transportReady<T extends PipecatClient>(\n  _target: T,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n): PropertyDescriptor | void {\n  const originalMethod = descriptor.value;\n\n  descriptor.value = function (this: T, ...args: unknown[]) {\n    if (this.state === \"ready\") {\n      return originalMethod.apply(this, args);\n    } else {\n      throw new BotNotReadyError(\n        `Attempt to call ${propertyKey.toString()} when transport not in ready state. Await connect() first.`\n      );\n    }\n  };\n\n  return descriptor;\n}\n\nexport function transportAlreadyStarted<T extends PipecatClient>(\n  _target: T,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n): PropertyDescriptor | void {\n  const originalMethod = descriptor.value;\n\n  const states = [\"authenticating\", \"connecting\", \"connected\", \"ready\"];\n\n  descriptor.value = function (this: T, ...args: unknown[]) {\n    if (states.includes(this.state)) {\n      throw new BotAlreadyStartedError(\n        `Attempt to call ${propertyKey.toString()} when client already started. Please call disconnect() before starting again.`\n      );\n    } else {\n      return originalMethod.apply(this, args);\n    }\n  };\n\n  return descriptor;\n}\n\nexport function transportInState<T extends PipecatClient>(states: string[]) {\n  return function (\n    _target: T,\n    propertyKey: string | symbol,\n    descriptor: PropertyDescriptor\n  ): PropertyDescriptor | void {\n    const originalMethod = descriptor.value;\n\n    descriptor.get = function (this: T, ...args: unknown[]) {\n      if (states.includes(this.state)) {\n        return originalMethod.apply(this, args);\n      } else {\n        throw new BotNotReadyError(\n          `Attempt to call ${propertyKey.toString()} when transport not in ${states}.`\n        );\n      }\n    };\n\n    return descriptor;\n  };\n}\n\nexport function getIfTransportInState<T extends PipecatClient>(\n  ...states: string[]\n) {\n  states = [\"ready\", ...states];\n\n  return function (\n    _target: T,\n    propertyKey: string | symbol,\n    descriptor: PropertyDescriptor\n  ): PropertyDescriptor | void {\n    const originalGetter = descriptor.get;\n\n    descriptor.get = function (this: T) {\n      if (states.includes(this.state)) {\n        return originalGetter?.apply(this);\n      } else {\n        throw new BotNotReadyError(\n          `Attempt to call ${propertyKey.toString()} when transport not in ${states}. Await connect() first.`\n        );\n      }\n    };\n\n    return descriptor;\n  };\n}\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nimport { ClientMessageData, RTVIMessage, RTVIMessageType } from \"../rtvi\";\nimport { logger } from \"./logger\";\n\ninterface QueuedRTVIMessage {\n  message: RTVIMessage;\n  timestamp: number;\n  timeout: number;\n  resolve: (value: unknown) => void;\n  reject: (reason?: unknown) => void;\n}\n\nexport class MessageDispatcher {\n  protected _sendMethod: (message: RTVIMessage) => void;\n  protected _queue = new Array<QueuedRTVIMessage>();\n  protected _gcInterval: ReturnType<typeof setInterval> | undefined = undefined;\n\n  constructor(sendMethod: (message: RTVIMessage) => void) {\n    this._queue = [];\n    this._sendMethod = sendMethod;\n  }\n\n  public disconnect() {\n    this.clearQueue();\n    clearInterval(this._gcInterval);\n    this._gcInterval = undefined;\n  }\n\n  public dispatch(\n    message_data: unknown,\n    type = RTVIMessageType.CLIENT_MESSAGE,\n    timeout = 10000\n  ): Promise<RTVIMessage> {\n    if (!this._gcInterval) {\n      // start garbage collection if not already running\n      this._gcInterval = setInterval(() => {\n        this._gc();\n      }, 2000); // Run garbage collection every 2 seconds\n    }\n\n    const message = new RTVIMessage(type, message_data);\n    const promise = new Promise((resolve, reject) => {\n      this._queue.push({\n        message,\n        timestamp: Date.now(),\n        timeout,\n        resolve,\n        reject,\n      });\n    });\n\n    logger.debug(\"[MessageDispatcher] dispatch\", message);\n\n    try {\n      this._sendMethod(message);\n    } catch (e) {\n      logger.error(\"[MessageDispatcher] Error sending message\", e);\n      return Promise.reject(e);\n    }\n\n    this._gc();\n\n    return promise as Promise<RTVIMessage>;\n  }\n\n  public clearQueue() {\n    this._queue = [];\n  }\n\n  private _resolveReject(\n    message: RTVIMessage,\n    resolve: boolean = true\n  ): RTVIMessage {\n    const queuedMessage = this._queue.find(\n      (msg) => msg.message.id === message.id\n    );\n\n    if (queuedMessage) {\n      if (resolve) {\n        logger.debug(\"[MessageDispatcher] Resolve\", message);\n        queuedMessage.resolve(message as RTVIMessage);\n      } else {\n        logger.debug(\"[MessageDispatcher] Reject\", message);\n        queuedMessage.reject(message as RTVIMessage);\n      }\n      // Remove message from queue\n      this._queue = this._queue.filter((msg) => msg.message.id !== message.id);\n      logger.debug(\"[MessageDispatcher] Queue\", this._queue);\n    }\n\n    return message;\n  }\n\n  public resolve(message: RTVIMessage): RTVIMessage {\n    return this._resolveReject(message, true);\n  }\n\n  public reject(message: RTVIMessage): RTVIMessage {\n    return this._resolveReject(message, false);\n  }\n\n  protected _gc() {\n    const expired: QueuedRTVIMessage[] = [];\n    this._queue = this._queue.filter((msg) => {\n      const isValid = Date.now() - msg.timestamp < msg.timeout;\n      if (!isValid) {\n        expired.push(msg);\n      }\n      return isValid;\n    });\n\n    expired.forEach((msg) => {\n      if (msg.message.type === RTVIMessageType.CLIENT_MESSAGE) {\n        msg.reject(\n          new RTVIMessage(RTVIMessageType.ERROR_RESPONSE, {\n            error: \"Timed out waiting for response\",\n            msgType: (msg.message.data as ClientMessageData).t,\n            data: (msg.message.data as ClientMessageData).d,\n            fatal: false,\n          })\n        );\n      }\n    });\n    logger.debug(\"[MessageDispatcher] GC\", this._queue);\n  }\n}\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nexport enum LogLevel {\n  NONE = 0,\n  ERROR = 1,\n  WARN = 2,\n  INFO = 3,\n  DEBUG = 4,\n}\n\nclass Logger {\n  private static instance: Logger;\n  private level: LogLevel = LogLevel.DEBUG;\n\n  private constructor() {}\n\n  static getInstance(): Logger {\n    if (!Logger.instance) {\n      Logger.instance = new Logger();\n    }\n    return Logger.instance;\n  }\n\n  setLevel(level: LogLevel) {\n    this.level = level;\n  }\n\n  debug(...args: unknown[]) {\n    if (this.level >= LogLevel.DEBUG) {\n      console.debug(...args);\n    }\n  }\n\n  info(...args: unknown[]) {\n    if (this.level >= LogLevel.INFO) {\n      console.info(...args);\n    }\n  }\n\n  warn(...args: unknown[]) {\n    if (this.level >= LogLevel.WARN) {\n      console.warn(...args);\n    }\n  }\n\n  error(...args: unknown[]) {\n    if (this.level >= LogLevel.ERROR) {\n      console.error(...args);\n    }\n  }\n}\n\nexport const logger = Logger.getInstance();\n\nexport type ILogger = Logger;\n","import { logger } from \"./logger\";\n\ntype Serializable =\n  | string\n  | number\n  | boolean\n  | null\n  | Serializable[]\n  | { [key: number | string]: Serializable };\n\nexport interface APIRequest {\n  endpoint: string | URL | globalThis.Request;\n  headers?: Headers;\n  requestData?: Serializable;\n  timeout?: number;\n}\n\n/**\n * @deprecated Use APIRequest instead\n */\nexport type ConnectionEndpoint = APIRequest;\n\nexport function isAPIRequest(value: unknown): boolean {\n  if (\n    typeof value === \"object\" &&\n    value !== null &&\n    Object.keys(value).includes(\"endpoint\")\n  ) {\n    const endpoint = (value as APIRequest)[\"endpoint\"];\n    return (\n      typeof endpoint === \"string\" ||\n      endpoint instanceof URL ||\n      (typeof Request !== \"undefined\" && endpoint instanceof Request)\n    );\n  }\n  return false;\n}\n\nexport async function makeRequest(\n  cxnOpts: APIRequest,\n  abortController?: AbortController\n): Promise<unknown> {\n  if (!abortController) {\n    abortController = new AbortController();\n  }\n  let handshakeTimeout: ReturnType<typeof setTimeout> | undefined;\n\n  return new Promise((resolve, reject) => {\n    (async () => {\n      if (cxnOpts.timeout) {\n        handshakeTimeout = setTimeout(async () => {\n          abortController.abort();\n          reject(new Error(\"Timed out\"));\n        }, cxnOpts.timeout);\n      }\n\n      logger.debug(`[Pipecat Client] Fetching from ${cxnOpts.endpoint}`);\n      fetch(cxnOpts.endpoint, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: new Headers({\n          \"Content-Type\": \"application/json\",\n          ...Object.fromEntries((cxnOpts.headers ?? new Headers()).entries()),\n        }),\n        body: JSON.stringify(cxnOpts.requestData),\n        signal: abortController?.signal,\n      })\n        .then((res) => {\n          logger.debug(\n            `[Pipecat Client] Received response from ${cxnOpts.endpoint}`,\n            res\n          );\n          if (!res.ok) {\n            reject(res);\n          }\n          res.json().then((data) => resolve(data));\n        })\n        .catch((err) => {\n          logger.error(`[Pipecat Client] Error fetching: ${err}`);\n          reject(err);\n        })\n        .finally(() => {\n          if (handshakeTimeout) {\n            clearTimeout(handshakeTimeout);\n          }\n        });\n    })();\n  });\n}\n","/**\n * Copyright (c) 2024, Daily.\n *\n * SPDX-License-Identifier: BSD-2-Clause\n */\n\nimport { RTVIError, RTVIMessage, TransportState } from \"../rtvi\";\nimport { PipecatClientOptions, RTVIEventCallbacks } from \"./client\";\nimport { APIRequest } from \"./rest_helpers.ts\";\n\nexport type Tracks = {\n  local: {\n    audio?: MediaStreamTrack;\n    video?: MediaStreamTrack;\n    screenAudio?: MediaStreamTrack;\n    screenVideo?: MediaStreamTrack;\n  };\n  bot?: {\n    audio?: MediaStreamTrack;\n    screenAudio?: undefined;\n    screenVideo?: undefined;\n    video?: MediaStreamTrack;\n  };\n};\n\nexport type TransportConnectionParams = unknown;\n\nexport abstract class Transport {\n  protected declare _options: PipecatClientOptions;\n  protected declare _onMessage: (ev: RTVIMessage) => void;\n  protected declare _callbacks: RTVIEventCallbacks;\n  protected declare _abortController: AbortController | undefined;\n  protected _state: TransportState = \"disconnected\";\n  protected _startBotParams: APIRequest | undefined;\n\n  constructor() {}\n\n  /** called from PipecatClient constructor to wire up callbacks */\n  abstract initialize(\n    options: PipecatClientOptions,\n    messageHandler: (ev: RTVIMessage) => void\n  ): void;\n\n  /**\n   * This method is intended to initialize cam/mic devices. It is wrapped\n   * by PipecatClient.initDevices and should not be called directly. It is also\n   * called as part of PipecatClient.connect if it has not already called.\n   */\n  abstract initDevices(): Promise<void>;\n\n  /**\n   * Establishes a connection with the remote server. This is the main entry\n   * point for the transport to start sending and receiving media and messages.\n   * This is called from PipecatClient.connect() and should not be called directly.\n   * @param connectParams - This type will ultimately be defned by the transport\n   * implementation. It is used to pass connection parameters to the transport.\n   */\n  connect(connectParams?: TransportConnectionParams): Promise<void> {\n    this._abortController = new AbortController();\n    let validatedParams = connectParams;\n    try {\n      validatedParams = this._validateConnectionParams(connectParams);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } catch (e: any) {\n      throw new RTVIError(\n        `Invalid connection params: ${e.message}. Please check your connection params and try again.`\n      );\n    }\n    return this._connect(validatedParams);\n  }\n\n  /**\n   * Allow the transports to determine how the bot was started.\n   */\n  get startBotParams(): APIRequest | undefined {\n    return this._startBotParams;\n  }\n\n  /**\n   * Set the parameters used to start the bot.\n   * @param startBotParams\n   */\n  set startBotParams(startBotParams: APIRequest) {\n    this._startBotParams = startBotParams;\n  }\n\n  abstract _validateConnectionParams(connectParams?: unknown): unknown;\n\n  abstract _connect(connectParams?: TransportConnectionParams): Promise<void>;\n  /**\n   * Disconnects the transport from the remote server. This is called from\n   * PipecatClient.disconnect() and should not be called directly.\n   */\n  disconnect(): Promise<void> {\n    if (this._abortController) {\n      this._abortController.abort();\n    }\n    return this._disconnect();\n  }\n  abstract _disconnect(): Promise<void>;\n  abstract sendReadyMessage(): void;\n\n  abstract get state(): TransportState;\n  abstract set state(state: TransportState);\n\n  abstract getAllMics(): Promise<MediaDeviceInfo[]>;\n  abstract getAllCams(): Promise<MediaDeviceInfo[]>;\n  abstract getAllSpeakers(): Promise<MediaDeviceInfo[]>;\n\n  abstract updateMic(micId: string): void;\n  abstract updateCam(camId: string): void;\n  abstract updateSpeaker(speakerId: string): void;\n\n  abstract get selectedMic(): MediaDeviceInfo | Record<string, never>;\n  abstract get selectedCam(): MediaDeviceInfo | Record<string, never>;\n  abstract get selectedSpeaker(): MediaDeviceInfo | Record<string, never>;\n\n  abstract enableMic(enable: boolean): void;\n  abstract enableCam(enable: boolean): void;\n  abstract enableScreenShare(enable: boolean): void;\n  abstract get isCamEnabled(): boolean;\n  abstract get isMicEnabled(): boolean;\n  abstract get isSharingScreen(): boolean;\n\n  abstract sendMessage(message: RTVIMessage): void;\n\n  abstract tracks(): Tracks;\n}\n\nexport class TransportWrapper {\n  private _transport: Transport;\n  private _proxy: Transport;\n\n  constructor(transport: Transport) {\n    this._transport = transport;\n    this._proxy = new Proxy(this._transport, {\n      get: (target, prop, receiver) => {\n        if (typeof target[prop as keyof Transport] === \"function\") {\n          let errMsg;\n          switch (String(prop)) {\n            // Disable methods that modify the lifecycle of the call. These operations\n            // should be performed via the Pipecat client in order to keep state in sync.\n            case \"initialize\":\n              errMsg = `Direct calls to initialize() are disabled and used internally by the PipecatClient.`;\n              break;\n            case \"initDevices\":\n              errMsg = `Direct calls to initDevices() are disabled. Please use the PipecatClient.initDevices() wrapper or let PipecatClient.connect() call it for you.`;\n              break;\n            case \"sendReadyMessage\":\n              errMsg = `Direct calls to sendReadyMessage() are disabled and used internally by the PipecatClient.`;\n              break;\n            case \"connect\":\n              errMsg = `Direct calls to connect() are disabled. Please use the PipecatClient.connect() wrapper.`;\n              break;\n            case \"disconnect\":\n              errMsg = `Direct calls to disconnect() are disabled. Please use the PipecatClient.disconnect() wrapper.`;\n              break;\n          }\n          if (errMsg) {\n            return () => {\n              throw new Error(errMsg);\n            };\n          }\n          // Forward other method calls\n          return (...args: unknown[]) => {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n            return (target[prop as keyof Transport] as Function)(...args);\n          };\n        }\n        // Forward property access\n        return Reflect.get(target, prop, receiver);\n      },\n    });\n  }\n\n  get proxy(): Transport {\n    return this._proxy;\n  }\n}\n","import Bowser from \"bowser\";\n\nimport {\n  name as packageName,\n  version as packageVersion,\n} from \"../package.json\";\nimport { AboutClientData } from \"../rtvi/messages\";\n\ninterface JSAboutClientData extends AboutClientData {\n  platform_details: {\n    browser?: string;\n    browser_version?: string;\n    platform_type?: string;\n    engine?: string;\n    device_memory?: number;\n    language?: string;\n    connection?: {\n      effectiveType?: string;\n      downlink?: number;\n    };\n  };\n}\n\nexport function learnAboutClient() {\n  let about: JSAboutClientData = {\n    library: packageName,\n    library_version: packageVersion,\n    platform_details: {},\n  };\n  // This uses legacy browser user agent parsing, which we still fall\n  // back to if the User Agent Hints API is not available\n  let navAgentInfo = null;\n  if (window?.navigator?.userAgent) {\n    try {\n      navAgentInfo = Bowser.parse(window.navigator.userAgent);\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    } catch (_) {\n      // void\n    }\n  }\n\n  if (navAgentInfo?.browser?.name) {\n    about.platform_details.browser = navAgentInfo.browser.name;\n  }\n  if (\n    navAgentInfo?.browser?.name === \"Safari\" &&\n    !navAgentInfo.browser.version\n  ) {\n    about.platform_details.browser_version = \"Web View\";\n  } else if (navAgentInfo?.browser?.version) {\n    about.platform_details.browser_version = navAgentInfo.browser.version;\n  }\n\n  if (navAgentInfo?.platform?.type) {\n    about.platform_details.platform_type = navAgentInfo.platform.type;\n  }\n\n  if (navAgentInfo?.engine?.name) {\n    about.platform_details.engine = navAgentInfo.engine.name;\n  }\n\n  if (navAgentInfo?.os) {\n    about.platform = navAgentInfo.os.name;\n    about.platform_version = navAgentInfo.os.version;\n  }\n  return about;\n}\n"],"names":[],"version":3,"file":"index.js.map"}